<!doctype html>
<head>
	<title>Title ~ js1024</title>
	<meta name="author" content="Author"></meta>
	<meta name="description" content="Short description"></meta>
	<meta name="title" content="Title"></meta>
	<meta charset=utf-8>
</head>
<body id=b>
<canvas id=a></canvas>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
#a { position: relative; } /* to be changed */
.play { position: fixed; top: 50%; left: 50%; transform: translateX(-50%)translateY(-50%); font-size: 30px; font-family: arial, sans-serif; background: #f3f4f5; padding: 15px; border: 2px solid #ddd; border-radius: 5px;
</style>

<script>

// Entry configuration
// ===================

var title = "Title"; // this will be assigned automatically

// Shim setup and polyfills (do not edit)
// ======================================

// canvas automatically adjusted !
a.width = innerWidth;
a.height = innerHeight;

c = a.getContext("2d"); // no more $type conditional

d = document;
window.AudioContext = window.AudioContext || window.webkitAudioContext;
window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
a.requestPointerLock = a.requestPointerLock || a.mozRequestPointerLock || a.webkitRequestPointerLock;
navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
if (typeof OscillatorNode !== 'undefined' && OscillatorNode.prototype) {
  OscillatorNode.prototype.start = OscillatorNode.prototype.start || OscillatorNode.prototype.noteOn;
  OscillatorNode.prototype.stop = OscillatorNode.prototype.stop || OscillatorNode.prototype.noteOff;
}

// Add a start button if sound is present in the code
onload = () => {
  var entry_code = entry.innerText;
  var has_sound = false;
  if(entry_code.includes('eval')){
    try {
      eval(entry_code.replace(/eval\(/g, 'throw(').replace(/eval\`/g, 'throw`'));
    }
    catch(e){
      entry_code = e;
    }
  }
  if(entry_code.includes("AudioContext")||entry_code.includes("Oscillator")||entry_code.includes("speak")||entry_code.includes("play")||entry_code.includes("autoplay")){
    b.insertAdjacentHTML("beforeEnd", "<button class='play' onclick='console.log(entry.innerText);eval(entry.innerText);this.remove()'>PLAY</button>");
  }
  else {
    eval(entry.innerText);
  }
};
console.log(
  a, // canvas
  b, // body
  c, // 2D canvas context
  d  // document
);

</script>

<script type=text id=entry>
    w=[],k=[],n=[],m=Math,z=a.width,j=a.height,P=e=>{let t=e.x,C=e.y,d=1e3+17e3*m.random();return n.push(l=>{if(e.f=l>d){e.y+=.3;let{x:l,y:m}=e;e.x+=e.x-t,e.y+=e.y-C,t=l,C=m}}),e},S=(a,b)=>{let e=b.x-a.x,t=b.y-a.y,C=m.sqrt(e*e+t*t);k.push(l=>{e=b.x-a.x,t=b.y-a.y;let n=m.sqrt(e*e+t*t),d=C-n,r=d*e/n,i=d*t/n;a.f&&b.f?(a.x-=r/2,a.y-=i/2,b.x+=r/2,b.y+=i/2):a.f&&!b.f?(a.x-=r,a.y-=i):!a.f&&b.f&&(b.x+=r,b.y+=i)}),w.push(e=>{c.moveTo(a.x,a.y),c.lineTo(b.x,b.y)})},C=(...e)=>{let t,C;e.forEach(e=>{let a=C,b=P({x:z/2-150+e%15*20,y:j/2-150+20*m.floor(e/15)});t?(S(a,b),C=b):t=C=b}),S(C,t)},C(5,7,97,93,63,64,79,81,21,20),C(8,11,26,24,39,42,102,98,68,69,84,86,56,53),C(105,107,182,183,198,195,180,181,121,120),C(109,112,202,199),C(125,126,186,185),C(113,116,176,174,189,191,206,203,158,160,130,129,144,143),C(117,118,163,164,119,119.9,209.9,209,179,177),(r=e=>{R=!1,c.clearRect(0,0,z,j),c.beginPath(),n.forEach(t=>t(e)),k.forEach(e=>e()),w.forEach(e=>e()),c.stroke(),e<2e4?requestAnimationFrame(r):location.reload()})(0);
let html;
setInterval(() => {
    fetch('index.html').then(response => response.text()).then(newHtml => { if (html && newHtml != html) { location.reload(); }; html = newHtml; });
}, 1000);

</script>
</body>
